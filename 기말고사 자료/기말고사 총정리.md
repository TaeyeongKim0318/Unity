# Unity 기말고사 정리
## 출제 방식과 출제 영역
### 1. 문제 형식
- 오지선다행 객관식(1점 x 10문제)
- 단답 주관식(2점 x 5문제)
- 서술형 주관식(5점 x 2문제)
### 2. 시험 범위
- 오브젝트에 적용되는 컴포넌트 (Audio, Effects, Event, Navigation, 등)
- Physics와 Collider(충돌)
- 사용자 인터페이스(UI)
- 유니티 애니메이션
- 씬뷰의 여러가지 아이콘
- 빛(Light) 오브젝트
- 증강현실(AR)과 가상현실(VR) 차이점
- VR 게임 구현하는 과정
<br>
<br>

## 기말고사 범위 정리
### 1. 증강현실 기기의 역사
9주차 내용
<br>
<br>

### 2. Physics로 움직임 제어하기
- 유니티의 Physics
  - Physics는 유니티에 표준으로 속해 있는 물리 엔진
  - Physics를 쓰면 오브젝트를 간단하게 물리 동작에 맞춰 움직일 수 있음
  - Physics는 **Rigidbody** 컴포넌트와 **Collider** 컴포넌트로 구성
  - Rigidbody 컴포넌트는 '힘 계산(물체에 작용하는 중력이나 마찰 등의 힘 계산)'을 담당하고 Collider 컴포넌트는 '물체의 충돌 판정'을 담당
  - **Physics를 사용해 물리적인 동작을 하면 오브젝트에는 Rigidbody와 Collider라는 두 개**가 적용
<br>

- Physics 활용하기
  - Physics를 쓰면 오브젝트를 간단하게 물리 법칙에 따라 움직일 수 있고, 충돌 판정도 자동으로 할 수 있음
  - **무대 위를 플레이어가 자유롭게 이동하는 액션 게임이나 복잡한 충돌 판정이 필요한 슈팅 게임**에 이상적임
<br>

- Collider
  - 다른 오브젝트와 충돌 처리
  - Collider의 종류
    | 이름 | 모양 |
    | :-- | :-- |
    | Circle Collider 2D | 원형 콜라이더 |
    | Box Collider 2D | 사각형 콜라이더 |
    | Edge Collider 2D | 선형 콜라이더, 오브젝트 일부를 충돌 판정할 때 사용한다. |
    | Polygon Collider 2D | 다각형 콜라이더, 오브젝트에 정확히 맞도록 충돌 판정할 때 사용한다. |
  - 이동하는 오브젝트는 캡슐형 콜라이더를 사용하는 것이 나음
  - 콜라이더의 위치나 크기는 Inspector 창에서 변경할 수 있음
  - 콜라이더의 옵션에서 Freeze Rotation의 Z를 체크해서 플레이어의 회전 방지
<br>

- Rigidbody
  - 배치한 오브젝트가 중력에 따라 낙하
  - 중력과 물리연산의 영향을 무시하려면 Rigidbody의 Body Type에서 드롭다운 목록을 열고 Kinematic을 선택
  - Rigidbody의 Gravity Scale을 조정해 중력값 조정 가능
<br>

- Find 메서드
  - Find 메서드의 변형
    | 메서드 | 설명 |
    | :-- | :-- |
    | Find(오브젝트 이름) | 씬 중에서 오브젝트 이름과 일치하는 게임 오브젝트를 한 개 찾아서 반환한다. |
    | FindWithTag(태그 이름) | 씬 중에서 태그 이름과 일치하는 게임 오브젝트를 한 개 찾아서 반환한다. |
    | FindGameObjectsWithTag(태그이름) | 씬 중에서 태그 이름과 일치하는 게임 오브젝트를 여러 개 찾아서 반환한다. 반환값은 GameObject 배열이다. |
    | FindObjectOfType(타입이름) | 씬 중에서 타입 이름과 일치하는 게임 오브젝트를 한 개 찾아서 반환한다. |
    | FindObjectsOfType(타입이름) | 씬 중에서 타입 이름과 일치하는 게임 오브젝트를 여러 개 찾아서 반환한다. 반환값은 Object 배열이다. |
<br>


- 플레이어 움직이기
  ```cs
  public class PlayerController : MonoBehaviour
  {
    Rigidbody2D rigid2D;
    float jumpForce = 680.0f;

    void Start()
    {
      this.rigid2D = GetComponent<Rigidbody2D>();
    }

    void Update()
    {
      // 점프한다.
      if (Input.GetKeyDown(KeyCode.Space))
      {
        this.rigid2D.AddForce(transform.up * this.jumpForce);
      }
    }
  }
  ```
<br>


- 플레이어 스프라이트
  - 플레이어를 반전하기 위해선 스프라이트도 변형해야함
    ```cs
    if (key != 0)
    {
      transform.localScale = new Vector3(key, 1, 1);
    }
    ```
<br>


- 에니메이션 만들기
  - 움직임을 조금씩 변경한 스프라이트를 준비해 일전 간격으로 바꿔 주는 방식을 사용하는데, 이를 **스프라이트 애니메이션**이라고 함
  - 애니메이션 작성과 전환을 일관되게 할 수 있는 **메카님 구조**를 사용
  - **메카님**
    - 메카님은 애니메이션을 작성하고 실행할 때 유니티 에디터에서 일관되게 조작할 수 있는 기능
    - 게임을 설계할 때 스프라이트 애니메이션을 작성해 각 애니메이션의 교체 시기를 지정
    - 게임을 플레이할 때 메카님이 오브젝트 상태를 판단하고 자동으로 애니메이션을 바꿔 재생
    - 메카님을 사용하려면 스프라이트, 애니메이션 클립, 애니메이터 컨트롤러, 애니메이터 컴포넌트의 관계를 이해해야 함
  - **스프라이트와 애니메이션 클립**
    - 스프라이트 애니메이션을 사용할 수 있도록 스프라이트를 정리한 파일이 애니메이션 클립
    - '걷기 애니메이션'이나 '점프 애니메이션'처럼 애니메이션마다 애니메이션 클립을 준비
    - 에니메이션 클립에는 재생할 스프라이트 정보, 재생 속도, 재생 시간 등 정보를 설정
  - **애니메이션 클립과 애니메이터 컨트롤러**
    - 앞의 애니메이션 클립을 정리한 것이 애니메이터 컨트롤러
    - 애니메이터 컨트롤러로는 어느 시점에 어느 애니메이션 클립을 재생할지 지정
  - **애니메이션 컨트롤러와 애니메이터 컴포넌트**
    - 애니메이션하려는 오브젝트에 있는 애니메이터 컴포넌트에 애니메이터 컨트롤러를 설정하면 애니메이터 컨트롤러에서 정의한 애니메이션을 재생할 수 있음
    ```cs
    public class PlayerController : MonoBehaviour
    {
      Animator animator;

      void Start()
      {
        this.animator = GetComponent<Animator>();
      }

      void Update()
      {
        ...
      }
      ...
      // 플레이어 속도에 맞춰 애니메이션 속도를 바꾼다
      this.animator.speed = speedx / 2.0f;
    }
    ```
<br>


- **Physics로 충돌 판정하기**
  - Physics를 사용한 충돌 판정 종류에는 Collision 모드(충돌 모드)와 Trigger 모드(통과 모드)가 있음
  - 오브젝트가 충돌할 때 호출되는 메서드는 충돌 상태와 충돌 판정 모드에 따라 다음과 같이 정해져 있음(3D에서는 각각 대응되는 3D용 메서드가 호출)
    | 상태 | Collision 모드 | Trigger 모드 |
    | :-- | :-- | :-- |
    | 충돌한 순간 | OnCollisionEnter2D | OnTriggerEnter2D |
    | 충돌 중 | OnCollisonStay2D | OnTriggerStay2D |
    | 충돌이 끝난 순간 | OnCollisionExit2D | OnTriggerExit2D |
    ```cs
    ...
    // 곧 도착
    void OnTriggerEnter2D(Collider2D other)
    {
      Debug.Log("골");
    }
    ```
<br>

- Physics의 충돌 판정 조건
  - 판정할 모든 오브젝트에 Collider 컴포넌트가 적용되어 있어야 함
  - 충돌을 판정할 오브젝트 중 적어도 한쪽에는 Rigidbody 컴포넌트가 적용되어 있어야 함
<br>

- 씬 전환하기
  - 씬을 파일로 저장하면 SceneManager를 이용해 사용 가능
    ```cs
    public class ClearDirector : MonoBehaviour
    {
      void Update()
      {
        if (Input.GetMouseButtonDown(0))
        {
          SceneManager.LoadScene("GameScene");
        }
      }
    }
    ```